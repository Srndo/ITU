window.tsDotClient=window.tsDotClient||new function(){function t(){y.log("main",v.path,p),i()}function e(){if(document.currentScript)return document.currentScript.src;for(var t=f.getElementsByTagName("script"),e=0;e<t.length;e++){var o=t[e];if(g.test(o.src))return o.src}return""}function o(){for(var t={},e=["product","basket","sale","customer"],o=0;o<e.length;o++){var n=e[o],r=p[n]||u[n];r&&"object"==typeof r&&void 0===r.tagName&&(y.log("soc:",n,r),t[n]=r)}return"undefined"!=typeof JSON&&(t=JSON.parse(JSON.stringify(t))),t.product&&t.product.description&&(t.product.description=t.product.description.substring(0,200)),t.product&&(t.product.alternativeImages||[]).length>5&&(t.product.alternativeImages=t.product.alternativeImages.slice(0,5)),t}function n(){return u.location.href}function r(){return parent!==u?f.referrer||"":""}function a(t){return t=encodeURIComponent(t)}function i(){var t=f.createElement("iframe"),e={soc:o(),url:n(),parentUrl:r(),productUrl:p.url||"",ver:"v0.1.9",tags:p.tags||"",ajax:p.ajax||0,utDomain:m,dsp:u.pxDsp};s(e),y.log(e),t.width=1,t.height=1,t.style.border="none",t.style.position="absolute",t.style.overflow="hidden",t.style.top="-1px",t.src=v.path+"/iframe.html?ver=v0.1.9&pageUrl="+a(e.url)+"&tags="+e.tags,t.onload=function(){y.log("iframe loaded"),t.contentWindow.postMessage(e,v.path)},f.body.appendChild(t),d()}function s(t){if("function"==typeof tsDotModify)try{tsDotModify(t,y)}catch(t){y.error("tsDotModify",t)}}function c(){try{if(u.localStorage)return!0}catch(t){return y.error("try:",t),!1}return!1}function d(){function t(t){y.log("message from iframe:",t),t.data&&t.data.pesid&&c()&&u.localStorage.setItem("px_pesid",t.data.pesid)}u.addEventListener?addEventListener("message",t,!1):attachEvent("onmessage",t)}function l(t){u.addEventListener?u.addEventListener("DOMContentLoaded",function(){t.called||(t.called=1,y.log("dom ready"),t())},!1):u.attachEvent&&u.attachEvent("onload",function(){t.called||(t.called=1,y.log("onload"),t())}),setTimeout(function(){t.called||(t.called=1,y.log("setTimeout"),t())},1e3)}if(!navigator.userAgent.match(/googlebot|seznambot|yandex|Baidu|BingPreview|msnbot|bingbot|Slurp|Sosospider|Google Web Preview|screenshot\-generator/i)){var u=window,f=document,p=u.tsDot||{},g=/ut\.js$/,m=function(){var t=e();return t?t.split("/")[2]:""}(),v=this;v.path=u.dotUrl||"https://ut.performax.cz/js";var h=function(){},y=f.cookie.indexOf("ts.debug=1")>-1&&u.console||{log:h,error:h,warn:h,info:h,debug:h};return y.log("init"),p.onlyAjax?y.log("exit: only ajax call"):l(t),v.ajax=function(e){y.log("ajax: data=",e,"self.tsDot=",p,"window.tsDot=",u.tsDot),(p=e||u.tsDot||{}).ajax=1,t()},this}};